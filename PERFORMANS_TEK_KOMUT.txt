# SSH ile Tek Komut - Performans İyileştirmeleri

## Yöntem 1: Dosyayı Sunucuya Yükle ve Çalıştır

```bash
# Dosyayı sunucuya yükle
scp PERFORMANS_TEK_KOMUT_SSH.sh user@server:/tmp/

# SSH ile bağlan ve çalıştır
ssh user@server 'bash /tmp/PERFORMANS_TEK_KOMUT_SSH.sh'
```

## Yöntem 2: Tek Satır Komut (Doğrudan)

```bash
ssh user@server 'cd /var/www/alo17 && sudo -u postgres psql -d alo17_db << "EOF"
CREATE INDEX IF NOT EXISTS idx_listing_category ON "Listing"(category);
CREATE INDEX IF NOT EXISTS idx_listing_subcategory ON "Listing"(subCategory);
CREATE INDEX IF NOT EXISTS idx_listing_active ON "Listing"(isActive, approvalStatus);
CREATE INDEX IF NOT EXISTS idx_listing_premium ON "Listing"(isPremium, isActive);
CREATE INDEX IF NOT EXISTS idx_listing_created ON "Listing"(createdAt DESC);
CREATE INDEX IF NOT EXISTS idx_listing_user ON "Listing"(userId);
CREATE INDEX IF NOT EXISTS idx_listing_expires ON "Listing"(expiresAt);
CREATE INDEX IF NOT EXISTS idx_listing_category_active ON "Listing"(category, isActive, approvalStatus);
CREATE INDEX IF NOT EXISTS idx_listing_premium_active ON "Listing"(isPremium, isActive, approvalStatus, createdAt DESC);
CREATE INDEX IF NOT EXISTS idx_listing_category_subcategory ON "Listing"(category, subCategory, isActive, approvalStatus);
CREATE INDEX IF NOT EXISTS idx_user_email ON "User"(email);
EOF
npx prisma generate && npm run build && pm2 restart alo17 && pm2 status'
```

## Yöntem 3: Pipe ile (En Kolay)

```bash
cat PERFORMANS_TEK_KOMUT_SSH.sh | ssh user@server 'bash'
```

## Yöntem 4: Inline Script (Tek Satır)

```bash
ssh user@server 'bash -c "cd /var/www/alo17 && sudo -u postgres psql -d alo17_db -c \"CREATE INDEX IF NOT EXISTS idx_listing_category ON \\\"Listing\\\"(category); CREATE INDEX IF NOT EXISTS idx_listing_subcategory ON \\\"Listing\\\"(subCategory); CREATE INDEX IF NOT EXISTS idx_listing_active ON \\\"Listing\\\"(isActive, approvalStatus); CREATE INDEX IF NOT EXISTS idx_listing_premium ON \\\"Listing\\\"(isPremium, isActive); CREATE INDEX IF NOT EXISTS idx_listing_created ON \\\"Listing\\\"(createdAt DESC); CREATE INDEX IF NOT EXISTS idx_listing_user ON \\\"Listing\\\"(userId); CREATE INDEX IF NOT EXISTS idx_listing_expires ON \\\"Listing\\\"(expiresAt); CREATE INDEX IF NOT EXISTS idx_listing_category_active ON \\\"Listing\\\"(category, isActive, approvalStatus); CREATE INDEX IF NOT EXISTS idx_listing_premium_active ON \\\"Listing\\\"(isPremium, isActive, approvalStatus, createdAt DESC); CREATE INDEX IF NOT EXISTS idx_listing_category_subcategory ON \\\"Listing\\\"(category, subCategory, isActive, approvalStatus); CREATE INDEX IF NOT EXISTS idx_user_email ON \\\"User\\\"(email);\" && npx prisma generate && npm run build && pm2 restart alo17 && pm2 status"'
```

## Önerilen: Yöntem 2 (En Temiz)

Yöntem 2'yi kullanın - en temiz ve okunabilir.

